created: 20251003015129761
modified: 20251114070311951
tags: 
title: 2025-10-03 å¥½åƒå¯¹ React ç²‰è½¬é»‘äº†
type: text/vnd.tiddlywiki


ç»§æˆä¸º Apple é»‘å­ä»¥åï¼Œæˆ‘ä¼¼ä¹ä¹Ÿå˜æˆäº† React é»‘å­ï¼ŒğŸ˜‚

æˆ‘è®¤çœŸçš„è§‰å¾— React å·²ç»åˆ°å¤´äº†ï¼Œä¼¼ä¹çœŸçš„å¿«åˆ°äº† React çš„ jQuery æ—¶åˆ»äº†ã€‚

React 19.2 çš„å‡ ä¸ªæ–°ç‰¹æ€§è®©æˆ‘è§‰å¾— React ä¼¼ä¹çœŸçš„æ²¡ä»€ä¹ˆå€¼å¾—åšçš„ä¸œè¥¿ï¼Œä¼¼ä¹éƒ½æ˜¯åœ¨ç”»è›‡æ·»è¶³ã€‚
  
`<Activity />` è™½ç„¶è¢«å®£ä¼ å¯ä»¥å¸®åŠ© `performance optimization called Selective Hydration` ä½†æ˜¯æ„Ÿè§‰å¾ˆé¸¡è‚‹ï¼ŒçœŸæ­£çš„å¤æ‚é¡¹ç›®ä¸­ï¼Œæ€§èƒ½ç“¶é¢ˆå®Œå…¨ä¸åœ¨è¿™ä¹ˆå°çš„ UI æ¸²æŸ“ä¸Šã€‚

`useEffectEvent` å°±æ›´æ‰¯äº†ï¼Œå®˜æ–¹ç»™çš„ä¾‹å­æœ¬èº«å°±æ˜¯æœ‰é—®é¢˜ï¼Œæä¾›ä¸€ä¸ªæ–°çš„ API è§£å†³æœ¬æ¥å°±æ˜¯é”™è¯¯çš„ä»£ç é—®é¢˜ï¼Œåªèƒ½é”™ä¸ŠåŠ é”™ï¼Œå¾’å¢æ¡†æ¶å¤æ‚åº¦ã€‚

React å®˜æ–¹è®¤ä¸ºæœ‰é—®é¢˜çš„ useEffect ä½¿ç”¨

```js
function ChatRoom({ roomId, theme }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.on('connected', () => {
      showNotification('Connected!', theme);
    });
    connection.connect();
    return () => {
      connection.disconnect()
    };
  }, [roomId, theme]);
```

React å®˜æ–¹é€šè¿‡æ·»åŠ ä¸€ä¸ªæ–°çš„ `useEffectEvent` è§£å†³

```js
function ChatRoom({ roomId, theme }) {
  const onConnected = useEffectEvent(() => {
    showNotification('Connected!', theme);
  });

  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.on('connected', () => {
      onConnected();
    });
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]); // âœ… All dependencies declared (Effect Events aren't dependencies)
```

æˆ‘çš„è§£å†³æ–¹æ¡ˆï¼šä¿æŒ showNotification ç‹¬ç«‹æ€§ï¼Œä¿æŒ pure function

```js

```

https://react.dev/blog/2025/10/01/react-19-2#use-effect-event


